{"version":3,"file":"11.test.js","sourceRoot":"","sources":["../../../spec/issues/11.test.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,iBA2BG;;AA3BH,2BAAuB;AACvB,yCAAkD;AAOlD;IAAA;IAIA,CAAC;IAHG,4BAAG,GAAH,UAAI,OAAgB;QAChB,OAAO,OAAO,CAAC,GAAG,GAAG,OAAO,CAAC,GAAG,CAAC;IACrC,CAAC;IACL,qBAAC;AAAD,CAAC,AAJD,IAIC;AAED,aAAI,CAAC,sCAAsC,EAAE,UAAM,CAAC;;;QAC5C,gBAAgB,GAAG,kBAAU,CAAC,GAAG,EAAkB,CAAC;QACxD,gBAAgB,CAAC,GAAG,CAAC,WAAG,CAAC,GAAG,EAAE,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;QAEvC,KAAK,GAAG,CAAC,CAAC;QACd,gBAAgB,CAAC,GAAG,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC;QAEzC,gBAAgB,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,WAAG,CAAC,EAAE,CAAC,UAAA,CAAC;YACrC,KAAK,EAAE,CAAC;YACR,OAAO,CAAC,CAAC,GAAG,KAAK,CAAC,IAAI,CAAC,CAAC,GAAG,KAAK,CAAC,CAAC;QACtC,CAAC,CAAC,CAAC,CAAC;QAEJ,CAAC,CAAC,EAAE,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;;;KAClB,CAAC,CAAC","sourcesContent":["import test from 'ava';\nimport { Substitute, Arg } from '../../src/index';\n\ntype Addands = {\n    op1: number;\n    op2: number;\n}\n\nclass RealCalculator {\n    add(addands: Addands): number {\n        return addands.op1 + addands.op2;\n    }\n}\n\ntest('issue 11: arg.is is only called once', async t => {\n    let mockedCalculator = Substitute.for<RealCalculator>();\n    mockedCalculator.add(Arg.any()).returns(4);\n\n    let count = 0;\n    mockedCalculator.add({ op1: 1, op2: 2 });\n\n    mockedCalculator.received(1).add(Arg.is(a => {\n        count++;\n        return a.op1 === 1 && a.op2 === 2;\n    }));\n\n    t.is(count, 1);\n});"]}